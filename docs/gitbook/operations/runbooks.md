
<!-- This document is generated. DO NOT EDIT! -->

# Panther Application Run Books

Refer to the 
[Cloud Security](https://docs.runpanther.io/policies/scanning#how-it-works)
and
[Log Analysis](https://docs.runpanther.io/log-analysis/log-processing#how-it-works)
architecture diagrams for context.

Resource names below refer to resources in the Cloud Formation templates in Panther.
Each resource describes its function and failure impacts.

## panther-alert-dedup
This ddb table implements deduplication of alerts.
## panther-alert-delivery
This lambda dispatches alerts to their specified outputs (destinations).

 Failure Impact
 * Failure of this lambda will impact delivery of alerts.
 * Failed events will go into the `panther-alerts-queue-dlq`. When the system has recovered they should be re-queued to the `panther-alerts-queue` using the Panther tool `requeue`.
## panther-alert-forwarder
The `panther-alert-forwarder` ddb table is updated conditionally when new policies have a violation
 or a time limit has been exceeded.
The `panther-alert-forwarder` lambda reads from the ddb stream for the table `panther-alert-forwarder`
 and sends them to the `panther-alerts-queue` sqs queue.

 Failure Impact
 * Failure of this lambda will stop delivery of alerts to destinations.
 * Data will not be lost as the lambda will be re-tried indefinitely.
## panther-alert-merger
deprecated
## panther-alert-processor
This lambda reads events from the `panther-alert-processor-queue`
 generated by the `policy-engine` lambda.  It updates the `panther-alert-forwarder` ddb table
 (which enables deduplication) and may trigger remediation by calling the `panther-remediation-api`.

 Failure Impact
 * Failure of this lambda will impact alerts generated policy violations.
 * Failed events will go into the `panther-alert-processor-queue-dlq`. When the system has recovered they should be re-queued to the `panther-alert-processor-queue` using the Panther tool `requeue`.
## panther-alert-processor-queue
This sqs q contains events that may become alerts.
 The `panther-alert-processor` lambda reads from this queue to
 determine if the event requires action or is a duplicate.

 Failure Impact
 * Failure of this sqs q will impact delivery of alerts to output destinations.
 * Failed events will go into the `panther-alert-processor-queue-dlq`. When the system has recovered they should be re-queued to the `panther-alert-processor-queue` using the Panther tool `requeue`.
## panther-alert-processor-queue-dlq
This is the dead letter queue for the `panther-alert-processor-queue`.
 Items are in this queue due to a failure of the `panther-alert-processor` lambda.
 When the system has recovered they should be re-queued to the `panther-alert-processor-queue` using
 the Panther tool `requeue`.
## panther-alerts-api
Lambda for CRUD actions for the alerts API.

 Failure Impact
 * Failure of this lambda will impact ?
## panther-alerts-queue
This sqs q does hold alerts to be delivery to user configured destinations.
 Failure Impact
 * Failure of this sqs q will impact delivery of alerts to output destinations.
 * Failed events will go into the `panther-alerts-queue-dlq`. When the system has recovered they should be re-queued to the `panther-alerts-queue` using the Panther tool `requeue`.
## panther-alerts-queue-dlq
This is the dead letter queue for the `panther-alerts-queue`.
 Items are in this queue due to a failure of the `panther-alerts-delivery` lambda.
 When the system has recovered they should be re-queued to the `panther-alerts-queue` using
 the Panther tool `requeue`.
## panther-analysis
This ddb table holds the policies applied by the `panther-rules-engine` lambda and
 managed by the `panther-analysis-api`.
## panther-analysis-api
The `panther-analysis-api` API Gateway calles the `panther-analysis-api` lambda.
This lambda implements the analysis API.

 Failure Impact
 * Failure of this lambda will impact ?
## panther-aws-event-processor
This lambda reads events from the `panther-aws-events-queue` sqs queue and determines if
 the infrastructure referenced in the event has changed. If so, it writes events to the
 `panther-shapshot-queue` to be scanned for the nature of the changes.

 Failure Impact
 * Failure of this lambda will impact from continuous infrastructure monitoring.
 * Failed events will go into the `panther-aws-events-queue-dlq`. When the system has recovered they should be re-queued to the `panther-aws-events-queue` using the Panther tool `requeue`.
## panther-aws-events-queue
This sqs q receives CloudTrail events delivered by CloudWatch events
 as well as S3 notifications from log processing.
 The `panther-aws-event-processor` lambda processes these events.

 Failure Impact
 * Failure of this sqs q will impact the continuous scanning accounts.
 * Failed events will go into the `panther-aws-events-queue-dlq`. When the system has recovered they should be re-queued to the `panther-aws-events-queue` using the Panther tool `requeue`.
## panther-aws-events-queue-dlq
This is the dead letter queue for the `panther-aws-events-queue`.
 Items are in this queue due to a failure of the `panther-aws-event-processor` lambda.
 When the system has recovered they should be re-queued to the `panther-aws-events-queue` using
 the Panther tool `requeue`.
## panther-aws-remediation
The `panther-aws-remediation` lambda executes automated infrastructure remediations.

 Failure Impact
 * Failure of this lambda will mean specific remediations are failing and infrastructure will remain in violation of policy.
## panther-cognito-custom-message-trigger
This lambda implements sending new user invite and password reset emails.

 Failure Impact
 * Failure of this lambda will impact sending new user invite and password reset emails.
## panther-compliance
This ddb table holds policy violation events for associated resources in the `panther-resources` ddb table.
## panther-compliance-api
This lambda implements the compliance API which is responsible for tracking resource and policy pass/fail states.

 Failure Impact
 * The UI experiences errors on nearly every page for cloud security related data.
 * Alerts for cloud security stop.
 * Policy failures are no longer be recorded.
The `panther-compliance-api` API Gateway calls the `panther-compliance-api` lambda.
## panther-events
deprecated.
## panther-graphql-api
This is the GraphQL endpoint for the Panther UI.

 Failure Impact
 * The Panther user interface be impacted.
## panther-input-data-notifications-queue
This sqs queue receives S3 notifications
 of log files to be processed by `panther-log-processor` lambda.

 Failure Impact
 * Failure of this sqs q will impact stop log analysis (log ingest and rule processing).
 * Failed events will go into the `panther-input-data-notifications-queue-dlq`. When the system has recovered they should be re-queued to the `panther-input-data-notifications-queue` using the Panther tool `requeue`.
## panther-input-data-notifications-queue-dlq
This is the dead letter queue for the `panther-input-data-notifications-queue`.
 Items are in this queue due to a failure of the `panther-log-processor` lambda.
 When the system has recovered they should be re-queued to the `panther-input-data-notifications-queue` using
 the Panther tool `requeue`.
## panther-log-alert-forwarder
This lambda writes alerts to the `panther-log-alerts-info` ddb table.
## panther-log-alert-notifications-queue
This sqs queue receives alert notifications
 to be processed by `panther-log-alert-forwarder` lambda.

 Failure Impact
 * Failure of this sqs q will impact the send of alerts to destinations.
 * Failed events will go into the `panther-log-alert-notifications-queue-dlq`. When the system has recovered they should be re-queued to the `panther-log-alert-notifications-queue` using the Panther tool `requeue`.
## panther-log-alert-notifications-queue-dlq
This is the dead letter queue for the `anther-log-alert-notifications-queue`.
 Items are in this queue due to a failure of the `panther-log-alert-forwarder` lambda.
 When the system has recovered they should be re-queued to the `panther-log-alert-notifications-queue` using
 the Panther tool `requeue`.
## panther-log-alerts
decprecated
## panther-log-alerts-info
This table maps alerts to rules.
## panther-log-processor
The lambda function that processes S3 files from
 notifications posted to the `panther-input-data-notifications-queue` SQS queue.

 Troubleshooting
 * If files cannot be processed errors will be generated. Some root causes can be:
   * S3 event configured against a whole bucket rather than a prefix, which causes
     files other than the intended logs to be processed.
   * Variations in the log format not handled by the parsers.
     [Open a bug report](https://github.com/panther-labs/panther/issues).

 Failure Impact
 * Failure of this lambda will cause log processing and rule processing (because rules match processed logs) to stop.
 * Failed events will go into the `panther-input-data-notifications-queue-dlq`. When the system has recovered they should be re-queued to the `panther-input-data-notifications-queue` using the Panther tool `requeue`.
## panther-organization
This table is deprecated.
## panther-organization-api
This lambda implements organization api (deprecated).
## panther-outputs
This table does what???
## panther-outputs-api
This lambda implements CRUD actions for alert outputs (destinations).

 Failure Impact
 * Failure of this lambda will impact ?
## panther-policy-engine
This lambda executes the user-defined policies against infrastructure events.
 It is called directly from the `panther-resource-processor` lambda.
 Failure Impact
 * Failure of this lambda will impact evaluating policies.
## panther-recent-alerts
Deprecated.
## panther-remediation-api
The `panther-remediation-api` API Gateway calls the `panther-remediation-api` lambda.
The `panther-remediation-api` lambda triggers AWS remediations.

 Failure Impact
 * Failure of this lambda will impact ?
## panther-remediation-processor
The `panther-remediation-processor` lambda processes queued remediations
 in the `panther-remediation-queue` and calls the `panther-aws-remediation` lambda.

 Failure Impact
 * Failure of this lambda will impact performing remediations and infrastructure will remain in violation of policy.
 * Failed events will go into the `panther-remediation-queue`. When the system has recovered they should be re-queued to the `panther-remediation-queue-dlq` using the Panther tool `requeue`.
## panther-remediation-queue
This sqs q has remediation request events that are
 processed by the `panther-remediation-processor` lambda.

 Failure Impact
 * Failure of this sqs q will impact the remediation of policy violations.
 * Failed events will go into the `panther-remediation-queue`. When the system has recovered they should be re-queued to the `panther-remediation-queue-dlq` using the Panther tool `requeue`.
## panther-remediation-queue-dlq
This is the dead letter queue for the `panther-remediation-queue`.
 Items are in this queue due to a failure of the `panther-remediation-processor` lambda.
 When the system has recovered they should be re-queued to the `panther-remediation-queue` using
 the Panther tool `requeue`.
## panther-resource-processor
This lambda reads from `panther-resources-queue` which has events concerning
 recently changed infrastructure. The lambda calls the `policy-engine` lambda to determine if
 there are any policy engine violations. Each violation is sent to
 the `panther-alert-processor-queue` for deduplication and delivery.
 Failure Impact
 * Failure of this lambda will impact continuous monitoring of infrastructure.
 * Failed events will go into the `panther-resources-queue-dlq`. When the system has recovered they should be re-queued to the `panther-resources-queue` using the Panther tool `requeue`.
## panther-resources
This table holds descriptions of the AWS resources in all accounts being monitored.
 The `panther-resources-api` lambda manages this table.
## panther-resources-api
The `panther-resources-api` API Gateway calls the `panther-resources-api` lambda.
The `panther-resources-api` lambda implements the resources API.
 Failure Impact
 * Failure of this lambda will impact ?
## panther-resources-queue
This sqs q has events from recently changed infrastructure.
 The lambda `panther-resource-processor` consumes these events to generate alerts.

 Failure Impact
 * Failure of this sqs q will impact the delivery of alerts for recently changed infrastructure.
 * Failed events will go into the `panther-resources-queue-dlq`. When the system has recovered they should be re-queued to the `panther-resources-queue` using the Panther tool `requeue`.
## panther-resources-queue-dlq
The dead letter queue for the `panther-resources-queue`.
 Items are in this queue due to a failure of the `panther-resource-processor` lambda.
 When the system has recovered they should be re-queued to the `panther-resources-queue` using
 the Panther tool `requeue`.
## panther-rules-engine
The `panther-rules-engine` lambda function processes S3 files from
 notifications posted to the `panther-rules-engine-queue` SQS queue.
 Matching events are written to S3.

 Failure Impact
 * Failure of this lambda will impact alerts generated for rule matches against log data.
 * Failed events will go into the `panther-rules-engine-dlq`. When the system has recovered they should be re-queued to the `panther-rules-engine` using the Panther tool `requeue`.
## panther-rules-engine-queue
The `panther-rules-engine-queue` sqs queue receives S3 notifications
 of log files to be processed by `panther-rules-engine` lambda.

 Failure Impact
 * Failure of this sqs q will impact executions of rules on log files.
 * Failed events will go into the `panther-rules-engine-queue-dlq`. When the system has recovered they should be re-queued to the `panther-rules-engine-queue` using the Panther tool `requeue`.
## panther-rules-engine-queue-dlq
This is the dead letter queue for the `panther-rules-engine-queue`.
 Items are in this queue due to a failure of the `panther-rules-engine` lambda.
 When the system has recovered they should be re-queued to the `panther-rules-engine-queue` using
 the Panther tool `requeue`.
## panther-snapshot-api
The `panther-snapshot-api` lambda implements the snapshot API.
## panther-snapshot-pollers
This  does what?

 Failure Impact
 * Failure of this lambda will impact
## panther-snapshot-queue
This sqs q has snapshot request events processed by the `panther-snapshot-pollers` lambda.

 Failure Impact
 * Failure of this sqs q will impact the scanning for changes in infrastrucure.
 * Failed events will go into the `panther-snapshot-queue-dlq`. When the system has recovered they should be re-queued to the `panther-snapshot-queue` using the Panther tool `requeue`.
## panther-snapshot-queue-dlq
The dead letter queue for the `panther-snapshot-queue`.
 Items are in this queue due to a failure of the `panther-snapshot-pollers` lambda.
 When the system has recovered they should be re-queued to the `panther-snapshot-queue` using
 the Panther tool `requeue`.
## panther-snapshot-scheduler
The `panther-snapshot-scheduler` lambda does infrastructure scans triggered
 by a 24 hour CloudWatch timer events.

 Failure Impact
 * Failure of this lambda will prevent daily infrastructure scans of accounts from running.
## panther-source-integrations
This table does what???
## panther-users-api
This lambda implements user api.

 ## Troubleshooting
## web
The load balancer associated with the Panther UI.

 Failure Impact
 * The Panther user interface will not be available.
