<!-- This document is generated. DO NOT EDIT! -->

# Panther Application Cloud Infrastructure

Refer to the
[Cloud Security](https://docs.runpanther.io/policies/scanning#how-it-works)
and
[Log Analysis](https://docs.runpanther.io/log-analysis/log-processing#how-it-works)
architecture diagrams for context.

Resource names below refer to resources in the Cloud Formation templates in Panther.

## panther-alert-dedup

This ddb table implements deduplication of alerts.

## panther-alert-delivery

This lambda dispatches alerts to their specified outputs (destinations).

## panther-alert-forwarder

The `panther-alert-forwarder` ddb table is updated conditionally when new policies have a violation
or a time limit has been exceeded.
The `panther-alert-forwarder` lambda reads from the ddb stream for the table `panther-alert-forwarder`
and sends them to the `panther-alerts-queue` sqs queue.

## panther-alert-merger

deprecated

## panther-alert-processor

This lambda reads events from the `panther-alert-processor-queue`
generated by the `policy-engine` lambda. It updates the `panther-alert-forwarder` ddb table
(which enables deduplication) and may trigger remediation by calling the `panther-remediation-api`.

## panther-alert-processor-queue

This sqs q contains events that may become alerts.
The `panther-alert-processor` lambda reads from this queue to
determine if the event requires action or is a duplicate.

### Failure Impact

Failure of this sqs q will impact delivery of alert to output destinations.

## panther-alert-processor-queue-dlq

The dead letter queue for the `panther-alert-processor-queue`.

## panther-alerts-api

Lambda for CRUD actions for the alerts API.

## panther-alerts-queue

This sqs q does what???

## panther-alerts-queue-dlq

The dead letter queue for the `panther-alerts-queue`.

## panther-analysis

This table does what???

## panther-analysis-api

The `panther-analysis-api` API Gateway called the `panther-analysis-api` lambda.
This lambda implements the analysis apii.

## panther-aws-event-processor

This lambda reads events from the `panther-aws-events-queue` sqs queue and determines if
the infrastructure referenced in the event has changed. If so, it writes events to the
`panther-shapshot-queue` to be scanned for the nature of the changes.

## panther-aws-events-queue

This sqs q receives CloudTrail events delivered by CloudWatch events
as well as S3 notifications from log processing.
The `panther-aws-event-processor` lambda processes these events.

## panther-aws-events-queue-dlq

The dead letter queue for the `panther-aws-events-queue`.

## panther-aws-remediation

The `panther-aws-remediation` lambda executes automated infrastructure remediations.

## panther-cognito-custom-message-trigger

This lambda implements what?

## panther-compliance

This table holds policy violation events for resources.

## panther-compliance-api

This lambda implements the compliance API.
The `panther-compliance-api` API Gateway calls the `panther-compliance-api` lambda.

## panther-events

deprecated.

## panther-graphql-api

This is the GraphQL endpoint for the Panther UI.

## panther-input-data-notifications-queue

This sqs queue receives S3 notifications
of log files to be processed by `panther-log-processor` lambda.

### Failure Impact

Failure of this sqs q will cause log analysis to stop.

## panther-input-data-notifications-queue-dlq

The dead letter queue for the `panther-input-data-notifications-queue`.

## panther-log-alert-forwarder

This lambda writes alerts to the `panther-log-alerts-info` ddb table.

## panther-log-alert-notifications-queue

This sqs queue receives alert notifications
to be processed by `panther-log-alert-forwarder` lambda.
There should be no items in the associated
dead letter queue.

## panther-log-alert-notifications-queue-dlq

The dead letter queue for the `anther-log-alert-notifications-queue`.

## panther-log-alerts

decprecated

## panther-log-alerts-info

This table maps alerts to rules.

## panther-log-processor

The lambda function that processes S3 files from
notifications posted to the `panther-input-data-notifications-queue` SQS queue.

### Troubleshooting

- If files cannot be processed errors will be generated. Some root causes can be:
  - S3 event configured against a whole bucket rather than a prefix, which causes
    files other than the intended logs to be processed.
  - Variations in the log format not handled by the parsers.
    [Open a bug report](https://github.com/panther-labs/panther/issues).

### Failure Impact

Failure of this lambda will cause log processing and rule processing (because rules match processed logs) to stop.
Look for items in the `panther-input-data-notifications-queue-dlq`.

## panther-organization

This table is deprecated.

## panther-organization-api

This lambda implements organization api (deprecated).

## panther-outputs

This table does what???

## panther-outputs-api

This lambda implements CRUD actions for alert outputs (destinations).

## panther-policy-engine

This lambda executes the user-defined policies against infrastructure events.
It is called directly from the `panther-resource-processor` lambda.

## panther-recent-alerts

Deprecated.

## panther-remediation-api

The `panther-remediation-api` API Gateway calls the `panther-remediation-api` lambda.
The `panther-remediation-api` lambda triggers AWS remediations.

## panther-remediation-processor

The `panther-remediation-processor` lambda processes queued remediations
in the `panther-remediation-queue`.

## panther-remediation-queue

This sqs q has remediation request events that are
processed by the `panther-remediation-processor` lambda.

## panther-remediation-queue-dlq

The dead letter queue for the `panther-remediation-queue`.

## panther-resource-processor

This lambda reads from `panther-resources-queue` which has events concerning
recently changed infrastructure. The lambda calls the `policy-engine` lambda to determine if
there are any policy engine violations. Each violation is sent to
the `panther-alert-processor-queue` for deduplication and delivery.

## panther-resources

This table holds descriptions of the AWS resources in all accounts being monitored.
The `panther-resources-api` lambda manages this table.

## panther-resources-api

The `panther-resources-api` API Gateway calls the `panther-resources-api` lambda.
The `panther-resources-api` lambda implements the resources API for the UI.

## panther-resources-queue

This sqs q has events from recently changed infrastructure.
The lambda `panther-resource-processor` consumes these events to generate alerts.

## panther-resources-queue-dlq

The dead letter queue for the `panther-resources-queue`.

## panther-rules-engine

The `panther-rules-engine` lambda function processes S3 files from
notifications posted to the `panther-rules-engine-queue` SQS queue.
Matching events are written to S3.

## panther-rules-engine-queue

The `panther-rules-engine-queue` sqs queue receives S3 notifications
of log files to be processed by `panther-rules-engine` lambda.

## panther-rules-engine-queue-dlq

The dead letter queue for the `panther-rules-engine-queue`.

## panther-snapshot-api

The `panther-snapshot-api` lambda implements the resources API for the UI.

## panther-snapshot-pollers

This does what?

## panther-snapshot-queue

This sqs q does what???

## panther-snapshot-queue-dlq

The dead letter queue for the `panther-snapshot-queue`.

## panther-snapshot-scheduler

The `panther-snapshot-scheduler` lambda does infrastructure scans triggered
by a 24 hour CloudWatch timer events.

## panther-source-integrations

This table does what???

## panther-users-api

This lambda implements user api.

## Troubleshooting

## web

The load balancer associated with the Panther UI.
