{
 "AWSTemplateFormatVersion": "2010-09-09",
 "Description": "Panther Glue Resources",
 "Parameters": {
  "ProcessedDataBucket": {
 "Type": "String",
 "Description": "Bucket to hold data for tables"
}
 },
 "Resources": {
  "panthertables": {
 "Type": "AWS::Glue::Database",
 "Properties": {
  "CatalogId": {
   "Ref": "AWS::AccountId"
  },
  "DatabaseInput": {
   "Name": "panther_tables",
   "Description": "Holds tables generated by Panther data processing"
  }
 }
},
  "panthertablesdummy": {
 "Type": "AWS::Glue::Table",
 "Properties": {
  "CatalogId": {
   "Ref": "AWS::AccountId"
  },
  "DatabaseName": {
   "Ref": "panthertables"
  },
  "TableInput": {
   "TableType": "EXTERNAL_TABLE",
   "Name": "dummy",
   "Description": "dummy",
   "StorageDescriptor": {
    "InputFormat": "org.apache.hadoop.mapred.TextInputFormat",
    "OutputFormat": "org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat",
    "Location": {
     "Fn::Sub": "s3://${ProcessedDataBucket}/logs/dummy/"
    },
    "SerdeInfo": {
     "SerializationLibrary": "org.openx.data.jsonserde.JsonSerDe",
     "Parameters": {
      "case.insensitive": "TRUE",
      "serialization.format": "1"
     }
    },
    "Columns": [
     {
      "Name": "FirstName",
      "Type": "string"
     },
     {
      "Name": "LastName",
      "Type": "string"
     },
     {
      "Name": "DOB",
      "Type": "timestamp"
     },
     {
      "Name": "Anniversary",
      "Type": "timestamp"
     }
    ]
   },
   "PartitionKeys": [
    {
     "Name": "year",
     "Type": "int",
     "Comment": "year"
    },
    {
     "Name": "month",
     "Type": "int",
     "Comment": "month"
    },
    {
     "Name": "day",
     "Type": "int",
     "Comment": "day"
    },
    {
     "Name": "hour",
     "Type": "int",
     "Comment": "hour"
    }
   ]
  }
 }
},
  "pantherviews": {
 "Type": "AWS::Glue::Database",
 "Properties": {
  "CatalogId": {
   "Ref": "AWS::AccountId"
  },
  "DatabaseInput": {
   "Name": "panther_views",
   "Description": "Holds views useful for querying Panther tables"
  }
 }
}
 },
 "Outputs": {
  "PantherTablesDatabase": {
 "Description": "Holds tables generated by Panther data processing",
 "Value": {
  "Ref": "panthertables"
 }
},
  "PantherViewsDatabase": {
 "Description": "Holds views useful for querying Panther tables",
 "Value": {
  "Ref": "pantherviews"
 }
}
 }
}
